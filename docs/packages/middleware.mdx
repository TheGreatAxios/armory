---
description: HTTP middleware for Express, Hono, Bun, and Elysia
title: @armory-sh/middleware
---

# @armory-sh/middleware

Accept payments in your HTTP API with middleware for major frameworks.

## Installation

```bash
bun add @armory-sh/middleware
```

## Express

```typescript
import { acceptPaymentsViaArmory } from '@armory-sh/middleware';

app.use(acceptPaymentsViaArmory({
  payTo: '0xYourWallet...',
  amount: '1.0'
}));
```

## Hono

```typescript
import { acceptPaymentsViaArmory } from '@armory/middleware';

app.use('*', acceptPaymentsViaArmory({
  payTo: '0xYourWallet...',
  amount: '1.0'
}));
```

## Bun

```typescript
import { acceptPaymentsViaArmory } from '@armory/middleware';

const middleware = acceptPaymentsViaArmory({
  payTo: '0xYourWallet...',
  amount: '1.0'
});

Bun.serve({
  fetch: middleware
});
```

## Elysia

```typescript
import { acceptPaymentsViaArmory } from '@armory/middleware';

app.use(acceptPaymentsViaArmory({
  payTo: '0xYourWallet...',
  amount: '1.0'
}));
```

## Settlement Modes

- **`verify`** - Verify only, no settlement (testing)
- **`settle`** - Verify and settle synchronously
- **`async`** - Return immediately, settle in background

## Multi-Network/Multi-Token

```typescript
acceptPaymentsViaArmory({
  payTo: '0xYourWallet...',
  amount: '1.0',
  accept: {
    networks: ['base', 'ethereum'],
    tokens: ['usdc', 'usdt'],
    facilitators: [
      { url: 'https://facilitator1.com' },
      { url: 'https://facilitator2.com' }
    ]
  }
});
```
